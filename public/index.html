<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="BeatFlow - Next-gen social beat making platform" />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
  
  <!-- Open Graph / Social Media -->
  <meta property="og:title" content="BeatFlow" />
  <meta property="og:description" content="Create, collaborate, and compete in beat battles" />
  <meta property="og:image" content="%PUBLIC_URL%/og-image.jpg" />
  <meta property="og:url" content="https://aiempirehq.github.io/beatflow" />
  <meta property="og:type" content="website" />
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="BeatFlow" />
  <meta name="twitter:description" content="Next-gen social beat making platform" />
  <meta name="twitter:image" content="%PUBLIC_URL%/og-image.jpg" />
  
  <!-- Preload critical assets -->
  <link rel="preload" href="%PUBLIC_URL%/fonts/BlenderPro-Bold.woff2" as="font" type="font/woff2" crossorigin />
  <link rel="preload" href="%PUBLIC_URL%/wasm/audio-processor.wasm" as="fetch" crossorigin />
  
  <title>BeatFlow</title>
  
  <!-- GitHub Pages route handling -->
  <script type="text/javascript">
    // Single Page Apps for GitHub Pages
    // MIT License
    // https://github.com/rafgraph/spa-github-pages
    (function(l) {
      if (l.search[1] === '/' ) {
        var decoded = l.search.slice(1).split('&').map(function(s) { 
          return s.replace(/~and~/g, '&')
        }).join('?');
        window.history.replaceState(null, null,
            l.pathname.slice(0, -1) + decoded + l.hash
        );
      }
    }(window.location))
  </script>
  
  <!-- Performance monitoring -->
  <script>
    // First Contentful Paint
    performance.mark('FCP');
    new PerformanceObserver((entryList) => {
      for (const entry of entryList.getEntries()) {
        if (entry.name === 'first-contentful-paint') {
          console.log('FCP:', entry.startTime);
          performance.measure('FCP', 'FCP', entry.name);
        }
      }
    }).observe({ entryTypes: ['paint'] });
    
    // Largest Contentful Paint
    new PerformanceObserver((entryList) => {
      for (const entry of entryList.getEntries()) {
        console.log('LCP:', entry.startTime);
      }
    }).observe({ entryTypes: ['largest-contentful-paint'] });
    
    // First Input Delay
    new PerformanceObserver((entryList) => {
      for (const entry of entryList.getEntries()) {
        console.log('FID:', entry.processingStart - entry.startTime);
      }
    }).observe({ entryTypes: ['first-input'] });
  </script>
  
  <style>
    /* Critical CSS */
    body {
      margin: 0;
      padding: 0;
      background: #000;
      color: #fff;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
        Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    /* Loading state */
    .loading {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #000;
      z-index: 9999;
    }
    
    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 3px solid #00ffff;
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Font loading */
    @font-face {
      font-family: 'BlenderPro';
      src: url('%PUBLIC_URL%/fonts/BlenderPro-Bold.woff2') format('woff2');
      font-weight: bold;
      font-style: normal;
      font-display: swap;
    }
  </style>
</head>
<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  
  <!-- Loading state -->
  <div id="loading" class="loading">
    <div class="loading-spinner"></div>
  </div>
  
  <div id="root"></div>
  
  <script>
    // Remove loading state once app is ready
    window.addEventListener('load', function() {
      document.getElementById('loading').style.display = 'none';
    });
  </script>
</body>
</html> 